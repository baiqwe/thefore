# ğŸ”§ å›¾ç‰‡ç®¡ç†ç³»ç»Ÿ - æŠ€æœ¯å®ç°æ–‡æ¡£

## 1. ç³»ç»Ÿæ¶æ„

### 1.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å›¾ç‰‡ç®¡ç†ç³»ç»Ÿæ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  YouTube     â”‚â”€â”€â”€â–¶â”‚  è§†é¢‘ä¸‹è½½    â”‚â”€â”€â”€â–¶â”‚ å¸§æå–   â”‚ â”‚
â”‚  â”‚  æœç´¢æ¨¡å—    â”‚    â”‚  æ¨¡å—        â”‚    â”‚ æ¨¡å—     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                    â”‚                  â”‚        â”‚
â”‚         â”‚                    â”‚                  â–¼        â”‚
â”‚         â”‚                    â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚         â”‚                    â”‚          â”‚  å›¾ç‰‡å¤„ç†    â”‚ â”‚
â”‚         â”‚                    â”‚          â”‚  æ¨¡å—        â”‚ â”‚
â”‚         â”‚                    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                    â”‚                  â”‚        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                            â”‚                             â”‚
â”‚                            â–¼                             â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                   â”‚  æ•°æ®æ›´æ–°    â”‚                      â”‚
â”‚                   â”‚  æ¨¡å—        â”‚                      â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                            â”‚                             â”‚
â”‚                            â–¼                             â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚              â”‚  å‰ç«¯å±•ç¤ºç»„ä»¶           â”‚                â”‚
â”‚              â”‚  - GuideImage          â”‚                â”‚
â”‚              â”‚  - SectionImage        â”‚                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ¨¡å—åˆ’åˆ†

1. **å›¾ç‰‡ç®¡ç†å·¥å…·å±‚** (`src/lib/image-utils.ts`)
2. **UI ç»„ä»¶å±‚** (`src/components/GuideImage.tsx`, `SectionImage.tsx`)
3. **è‡ªåŠ¨åŒ–è„šæœ¬å±‚** (`scripts/auto-extract-guide-images.js`)
4. **æ•°æ®æ›´æ–°å±‚** (`scripts/update-guide-images.js`)
5. **å­˜å‚¨å±‚** (`public/images/`)

## 2. æ ¸å¿ƒæ¨¡å—å®ç°

### 2.1 å›¾ç‰‡ç®¡ç†å·¥å…·æ¨¡å—

#### 2.1.1 æ¥å£å®šä¹‰
```typescript
interface ImageConfig {
  src: string
  alt: string
  width?: number
  height?: number
}
```

#### 2.1.2 æ ¸å¿ƒå‡½æ•°

**getGuideCoverImage(slug: string, fallbackUrl?: string): ImageConfig**
- **åŠŸèƒ½**: è·å–æŒ‡å—å°é¢å›¾é…ç½®
- **ä¼˜å…ˆçº§**: æœ¬åœ°å›¾ç‰‡ > å¤–éƒ¨URL > å ä½ç¬¦
- **è¿”å›**: å›¾ç‰‡é…ç½®å¯¹è±¡ï¼ˆsrc, alt, width, heightï¼‰

**getItemImage(slug: string, fallbackUrl?: string): ImageConfig**
- **åŠŸèƒ½**: è·å–ç‰©å“å›¾ç‰‡é…ç½®
- **é€»è¾‘**: åŒå°é¢å›¾ï¼Œè·¯å¾„ä¸º `/images/items/{slug}.jpg`

**getPlaceholderImage(width: number, height: number, text?: string): string**
- **åŠŸèƒ½**: ç”Ÿæˆå ä½ç¬¦URL
- **æœåŠ¡**: via.placeholder.com
- **ç”¨é€”**: å¼€å‘é˜¶æ®µå¿«é€Ÿé¢„è§ˆå¸ƒå±€

### 2.2 UI ç»„ä»¶å®ç°

#### 2.2.1 GuideImage ç»„ä»¶

**æŠ€æœ¯æ ˆ**: React + Next.js Image

**æ ¸å¿ƒé€»è¾‘**:
```typescript
1. ä½¿ç”¨ useState ç®¡ç†å›¾ç‰‡åŠ è½½çŠ¶æ€
2. ä½¿ç”¨ useEffect åœ¨å®¢æˆ·ç«¯æ£€æŸ¥å›¾ç‰‡å­˜åœ¨æ€§
3. å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå ä½ç¬¦
4. ä½¿ç”¨ Next.js Image ç»„ä»¶ä¼˜åŒ–åŠ è½½
```

**å…³é”®ç‰¹æ€§**:
- å®¢æˆ·ç«¯é”™è¯¯å¤„ç†
- è‡ªåŠ¨é™çº§åˆ°å ä½ç¬¦
- å“åº”å¼è®¾è®¡ï¼ˆaspect ratioï¼‰
- æ‡’åŠ è½½æ”¯æŒ

#### 2.2.2 SectionImage ç»„ä»¶

**æ ¸å¿ƒé€»è¾‘**:
```typescript
1. ç®€å•åŒ…è£… Next.js Image ç»„ä»¶
2. åŠ è½½å¤±è´¥æ—¶è‡ªåŠ¨éšè—ï¼ˆä¸æ˜¾ç¤ºï¼‰
3. å›ºå®š 4:3 æ¯”ä¾‹
4. æ‡’åŠ è½½ä¼˜åŒ–
```

### 2.3 è‡ªåŠ¨åŒ–æå–è„šæœ¬

#### 2.3.1 è„šæœ¬ç»“æ„

```javascript
scripts/auto-extract-guide-images.js
â”œâ”€â”€ é…ç½®å¸¸é‡ (CONFIG)
â”œâ”€â”€ checkDependencies() - æ£€æŸ¥å·¥å…·å®‰è£…
â”œâ”€â”€ searchYouTubeVideo() - æœç´¢è§†é¢‘
â”œâ”€â”€ downloadVideo() - ä¸‹è½½è§†é¢‘
â”œâ”€â”€ extractFrames() - æå–å¸§
â”œâ”€â”€ processImages() - å¤„ç†å›¾ç‰‡
â”œâ”€â”€ generateImageMapping() - ç”Ÿæˆæ˜ å°„
â””â”€â”€ cleanup() - æ¸…ç†ä¸´æ—¶æ–‡ä»¶
```

#### 2.3.2 å…³é”®å®ç°ç»†èŠ‚

**YouTube æœç´¢**:
```javascript
// ä½¿ç”¨ yt-dlp æœç´¢ï¼ˆæ— éœ€ APIï¼‰
const command = `yt-dlp --flat-playlist --print "%(id)s|%(title)s|%(url)s" "ytsearch5:${query}"`

// è§£æç»“æœ
const results = output.split('\n')
  .map(line => parseVideoInfo(line))
  .filter(video => video.id)
```

**è§†é¢‘ä¸‹è½½**:
```javascript
// é™åˆ¶è´¨é‡ä»¥èŠ‚çœæ—¶é—´
const command = `yt-dlp -f "best[height<=1080]" -o "${outputPath}" "${videoUrl}"`

// æ‰§è¡Œä¸‹è½½
execSync(command, { stdio: 'inherit' })
```

**å¸§æå–**:
```javascript
// æ¯10ç§’æå–ä¸€å¸§
const fps = 0.1 // frames per second
const command = `ffmpeg -i "${videoPath}" -vf "fps=${fps}" "${outputDir}/frame_%04d.jpg"`

// æ‰§è¡Œæå–
execSync(command)
```

**å›¾ç‰‡å¤„ç†**:
```javascript
// è£å‰ªä¸ºå°é¢å°ºå¯¸
const command = `ffmpeg -i "${inputPath}" -vf "scale=1200:630:force_original_aspect_ratio=increase,crop=1200:630" "${outputPath}"`

// æ‰§è¡Œè£å‰ª
execSync(command)
```

#### 2.3.3 ç« èŠ‚åˆ†é…ç®—æ³•

```javascript
// å¹³å‡åˆ†é…å¸§åˆ°ç« èŠ‚
const framesPerSection = Math.ceil(totalFrames / sections.length)

sections.forEach((section, index) => {
  const frameIndex = Math.min(
    index * framesPerSection, 
    frames.length - 1
  )
  const frame = frames[frameIndex]
  // åˆ†é…ç»™ç« èŠ‚
})
```

### 2.4 æ•°æ®æ›´æ–°è„šæœ¬

#### 2.4.1 æ›´æ–°æµç¨‹

```javascript
1. è¯»å–å›¾ç‰‡æ˜ å°„æ–‡ä»¶ ({slug}-images.json)
2. è¯»å–åŸå§‹ JSON æ•°æ® (guides.json)
3. æŸ¥æ‰¾å¯¹åº”æŒ‡å—
4. æ›´æ–° coverImage å­—æ®µ
5. éå†ç« èŠ‚ï¼Œæ›´æ–°æ¯ä¸ªç« èŠ‚çš„ image å­—æ®µ
6. ä¿å­˜æ›´æ–°åçš„ JSON æ–‡ä»¶
```

#### 2.4.2 JSON ç»“æ„æ‰©å±•

**åŸå§‹ç»“æ„**:
```json
{
  "slug": "race-tier-list",
  "title": "...",
  "content": [
    { "section": "...", "text": "..." }
  ]
}
```

**æ‰©å±•åç»“æ„**:
```json
{
  "slug": "race-tier-list",
  "title": "...",
  "coverImage": "/images/guides/race-tier-list.jpg",
  "content": [
    { 
      "section": "...", 
      "text": "...",
      "image": "/images/guides/race-tier-list-section.jpg"
    }
  ]
}
```

### 2.5 å›¾ç‰‡æ˜ å°„æ–‡ä»¶æ ¼å¼

```json
{
  "guideSlug": "race-tier-list",
  "coverImage": "race-tier-list.jpg",
  "sectionImages": {
    "Getting Started": "race-tier-list-getting-started.jpg",
    "Essential Items": "race-tier-list-essential-items.jpg"
  }
}
```

## 3. æ–‡ä»¶ç»“æ„

### 3.1 ç›®å½•ç»“æ„

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ public/
â”‚   â””â”€â”€ images/
â”‚       â”œâ”€â”€ guides/          # æŒ‡å—å›¾ç‰‡
â”‚       â”œâ”€â”€ items/           # ç‰©å“å›¾ç‰‡
â”‚       â””â”€â”€ quests/          # ä»»åŠ¡å›¾ç‰‡
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ image-utils.ts   # å›¾ç‰‡å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ GuideImage.tsx   # å°é¢å›¾ç»„ä»¶
â”‚       â””â”€â”€ SectionImage.tsx # ç« èŠ‚å›¾ç‰‡ç»„ä»¶
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ auto-extract-guide-images.js  # è‡ªåŠ¨æå–è„šæœ¬
â”‚   â”œâ”€â”€ update-guide-images.js        # æ•°æ®æ›´æ–°è„šæœ¬
â”‚   â”œâ”€â”€ test-image-extraction.js      # æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ generate-placeholder-images.js # å ä½ç¬¦ç”Ÿæˆ
â””â”€â”€ temp/
    â””â”€â”€ videos/              # ä¸´æ—¶è§†é¢‘æ–‡ä»¶
```

### 3.2 æ–‡ä»¶å‘½åè§„èŒƒ

- **æŒ‡å—å°é¢**: `{guide-slug}.jpg`
- **ç« èŠ‚å›¾ç‰‡**: `{guide-slug}-{section-slug}.jpg`
- **ç‰©å“å›¾ç‰‡**: `{item-slug}.jpg`
- **æ˜ å°„æ–‡ä»¶**: `{guide-slug}-images.json`

**slug è½¬æ¢è§„åˆ™**:
```javascript
sectionSlug = sectionName
  .toLowerCase()
  .replace(/[^a-z0-9]+/g, '-')
  .replace(/^-|-$/g, '')
```

## 4. æŠ€æœ¯æ ˆ

### 4.1 å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: Next.js 14 (App Router)
- **è¯­è¨€**: TypeScript
- **UI**: React + Tailwind CSS
- **å›¾ç‰‡ä¼˜åŒ–**: Next.js Image ç»„ä»¶

### 4.2 åç«¯/è„šæœ¬æŠ€æœ¯
- **è¿è¡Œæ—¶**: Node.js 18+
- **è„šæœ¬è¯­è¨€**: JavaScript (Node.js)
- **è§†é¢‘å·¥å…·**: yt-dlp, ffmpeg
- **æ–‡ä»¶æ“ä½œ**: Node.js fs æ¨¡å—

### 4.3 å¤–éƒ¨ä¾èµ–
- **yt-dlp**: YouTube è§†é¢‘ä¸‹è½½ï¼ˆPythonï¼‰
- **ffmpeg**: è§†é¢‘å¤„ç†ï¼ˆç³»ç»Ÿå·¥å…·ï¼‰

## 5. API è®¾è®¡

### 5.1 å›¾ç‰‡å·¥å…·å‡½æ•° API

```typescript
// è·å–æŒ‡å—å°é¢å›¾
function getGuideCoverImage(
  slug: string, 
  fallbackUrl?: string
): ImageConfig

// è·å–ç‰©å“å›¾ç‰‡
function getItemImage(
  slug: string, 
  fallbackUrl?: string
): ImageConfig

// ç”Ÿæˆå ä½ç¬¦
function getPlaceholderImage(
  width: number, 
  height: number, 
  text?: string
): string

// æ£€æŸ¥å›¾ç‰‡å­˜åœ¨æ€§ï¼ˆå®¢æˆ·ç«¯ï¼‰
function imageExists(src: string): Promise<boolean>
```

### 5.2 ç»„ä»¶ Props API

```typescript
// GuideImage ç»„ä»¶
interface GuideImageProps {
  slug: string
  title: string
  fallbackUrl?: string
  className?: string
}

// SectionImage ç»„ä»¶
interface SectionImageProps {
  src: string
  alt: string
  className?: string
}
```

## 6. æ•°æ®æµ

### 6.1 å›¾ç‰‡æå–æµç¨‹

```
1. ç”¨æˆ·è¾“å…¥: guide-slug
           â†“
2. è¯»å–æŒ‡å—æ•°æ® (guides.json)
           â†“
3. æ„å»ºæœç´¢æŸ¥è¯¢ (title + description)
           â†“
4. æœç´¢ YouTube è§†é¢‘ (yt-dlp)
           â†“
5. é€‰æ‹©æœ€ä½³è§†é¢‘
           â†“
6. ä¸‹è½½è§†é¢‘ (ä¸´æ—¶ç›®å½•)
           â†“
7. æå–å…³é”®å¸§ (ffmpeg)
           â†“
8. åˆ†é…å¸§åˆ°ç« èŠ‚
           â†“
9. è£å‰ªå’Œä¼˜åŒ–å›¾ç‰‡
           â†“
10. ä¿å­˜åˆ° public/images/guides/
           â†“
11. ç”Ÿæˆæ˜ å°„æ–‡ä»¶ ({slug}-images.json)
```

### 6.2 æ•°æ®æ›´æ–°æµç¨‹

```
1. è¯»å–æ˜ å°„æ–‡ä»¶ ({slug}-images.json)
           â†“
2. è¯»å–åŸå§‹æ•°æ® (guides.json)
           â†“
3. æŸ¥æ‰¾å¯¹åº”æŒ‡å—
           â†“
4. æ›´æ–° coverImage å­—æ®µ
           â†“
5. æ›´æ–°ç« èŠ‚ image å­—æ®µ
           â†“
6. ä¿å­˜æ›´æ–°åçš„ guides.json
```

### 6.3 å›¾ç‰‡æ˜¾ç¤ºæµç¨‹

```
1. é¡µé¢åŠ è½½
           â†“
2. è°ƒç”¨ getGuideCoverImage()
           â†“
3. è¿”å›å›¾ç‰‡é…ç½® (src, alt, width, height)
           â†“
4. GuideImage ç»„ä»¶æ¸²æŸ“
           â†“
5. Next.js Image ç»„ä»¶åŠ è½½å›¾ç‰‡
           â†“
6. æˆåŠŸ â†’ æ˜¾ç¤ºå›¾ç‰‡
   å¤±è´¥ â†’ æ˜¾ç¤ºå ä½ç¬¦
```

## 7. é”™è¯¯å¤„ç†

### 7.1 å›¾ç‰‡åŠ è½½å¤±è´¥
- **ç­–ç•¥**: è‡ªåŠ¨é™çº§åˆ°å ä½ç¬¦
- **å®ç°**: ä½¿ç”¨ `onError` å›è°ƒ
- **ç”¨æˆ·ä½“éªŒ**: æ˜¾ç¤ºå‹å¥½çš„å ä½ç¬¦ç•Œé¢

### 7.2 è§†é¢‘ä¸‹è½½å¤±è´¥
- **ç­–ç•¥**: æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæä¾›æ‰‹åŠ¨URLè¾“å…¥
- **å®ç°**: try-catch åŒ…è£¹ï¼Œæä¾› fallback

### 7.3 å·¥å…·ç¼ºå¤±
- **ç­–ç•¥**: æ£€æŸ¥å¹¶æç¤ºå®‰è£…
- **å®ç°**: `checkDependencies()` å‡½æ•°

### 7.4 å›¾ç‰‡ä¸å­˜åœ¨
- **ç­–ç•¥**: æ˜¾ç¤ºå ä½ç¬¦
- **å®ç°**: å®¢æˆ·ç«¯æ£€æŸ¥ + æœåŠ¡ç«¯404å¤„ç†

## 8. æ€§èƒ½ä¼˜åŒ–

### 8.1 å›¾ç‰‡ä¼˜åŒ–
- ä½¿ç”¨ Next.js Image ç»„ä»¶è‡ªåŠ¨ä¼˜åŒ–
- æ”¯æŒ WebP æ ¼å¼ï¼ˆæµè§ˆå™¨æ”¯æŒæ—¶ï¼‰
- æ‡’åŠ è½½ï¼ˆloading="lazy"ï¼‰
- å“åº”å¼å°ºå¯¸ï¼ˆsizes å±æ€§ï¼‰

### 8.2 è§†é¢‘å¤„ç†ä¼˜åŒ–
- é™åˆ¶ä¸‹è½½è´¨é‡ï¼ˆæœ€é«˜1080pï¼‰
- æ‰¹é‡å¤„ç†æ—¶æ·»åŠ å»¶è¿Ÿ
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- æ”¯æŒæ–­ç‚¹ç»­ä¼ 

### 8.3 è„šæœ¬ä¼˜åŒ–
- å¼‚æ­¥å¤„ç†å¤§æ–‡ä»¶
- æµå¼å¤„ç†ï¼ˆé¿å…å†…å­˜æº¢å‡ºï¼‰
- è¿›åº¦æ˜¾ç¤º

## 9. æ‰©å±•ç‚¹

### 9.1 å¯æ‰©å±•çš„å›¾ç‰‡æº
- æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- å¤–éƒ¨URLï¼ˆCDNï¼‰
- å ä½ç¬¦æœåŠ¡
- AIç”ŸæˆæœåŠ¡ï¼ˆæœªæ¥ï¼‰

### 9.2 å¯æ‰©å±•çš„å¤„ç†æµç¨‹
- è‡ªå®šä¹‰æå–é¢‘ç‡
- è‡ªå®šä¹‰å›¾ç‰‡å°ºå¯¸
- è‡ªå®šä¹‰åˆ†é…ç®—æ³•
- è‡ªå®šä¹‰ä¼˜åŒ–ç­–ç•¥

### 9.3 å¯æ‰©å±•çš„æ•°æ®æ ¼å¼
- æ”¯æŒå¤šè¯­è¨€å›¾ç‰‡
- æ”¯æŒå›¾ç‰‡ç‰ˆæœ¬ç®¡ç†
- æ”¯æŒå›¾ç‰‡å…ƒæ•°æ®

## 10. éƒ¨ç½²è€ƒè™‘

### 10.1 é™æ€æ–‡ä»¶éƒ¨ç½²
- å›¾ç‰‡æ–‡ä»¶åŒ…å«åœ¨æ„å»ºäº§ç‰©ä¸­
- æ”¯æŒ CDN éƒ¨ç½²
- æ”¯æŒ Git LFSï¼ˆå¤§æ–‡ä»¶ï¼‰

### 10.2 CI/CD é›†æˆ
- æ„å»ºæ—¶éªŒè¯å›¾ç‰‡å­˜åœ¨æ€§
- è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡
- ç”Ÿæˆå›¾ç‰‡æ˜ å°„

### 10.3 è¿è¡Œæ—¶è¦æ±‚
- æå–è„šæœ¬éœ€è¦ Node.js ç¯å¢ƒ
- éœ€è¦ yt-dlp å’Œ ffmpegï¼ˆå¼€å‘ç¯å¢ƒï¼‰
- ç”Ÿäº§ç¯å¢ƒä¸éœ€è¦è¿™äº›å·¥å…·

## 11. æµ‹è¯•ç­–ç•¥

### 11.1 å•å…ƒæµ‹è¯•
- å›¾ç‰‡å·¥å…·å‡½æ•°æµ‹è¯•
- ç»„ä»¶æ¸²æŸ“æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

### 11.2 é›†æˆæµ‹è¯•
- å®Œæ•´æå–æµç¨‹æµ‹è¯•
- æ•°æ®æ›´æ–°æµç¨‹æµ‹è¯•
- ç«¯åˆ°ç«¯æµ‹è¯•

### 11.3 æ¨¡æ‹Ÿæµ‹è¯•
- æ¨¡æ‹Ÿè§†é¢‘ä¸‹è½½
- æ¨¡æ‹Ÿå¸§æå–
- æµ‹è¯•è„šæœ¬éªŒè¯

## 12. å®‰å…¨è€ƒè™‘

### 12.1 è¾“å…¥éªŒè¯
- éªŒè¯ slug æ ¼å¼
- éªŒè¯ URL æ ¼å¼
- é˜²æ­¢è·¯å¾„éå†

### 12.2 æ–‡ä»¶æ“ä½œ
- é™åˆ¶æ–‡ä»¶å¤§å°
- éªŒè¯æ–‡ä»¶ç±»å‹
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### 12.3 å¤–éƒ¨èµ„æº
- éªŒè¯å¤–éƒ¨URL
- å¤„ç† CORS é—®é¢˜
- é˜²æ­¢ XSS æ”»å‡»

---

## é™„å½•ï¼šå…³é”®ä»£ç ç¤ºä¾‹

### A. å›¾ç‰‡å·¥å…·å‡½æ•°ç¤ºä¾‹

```typescript
export function getGuideCoverImage(slug: string, fallbackUrl?: string): ImageConfig {
  const localPath = `/images/guides/${slug}.jpg`
  
  if (fallbackUrl) {
    return {
      src: fallbackUrl,
      alt: `Cover image for ${slug}`,
      width: 1200,
      height: 630,
    }
  }
  
  return {
    src: localPath,
    alt: `Cover image for ${slug}`,
    width: 1200,
    height: 630,
  }
}
```

### B. ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

```tsx
// å°é¢å›¾
<GuideImage 
  slug={guide.slug} 
  title={guide.title}
  fallbackUrl={guide.coverImage}
/>

// ç« èŠ‚å›¾ç‰‡
{section.image && (
  <SectionImage
    src={section.image}
    alt={`${section.section} illustration`}
  />
)}
```

### C. è„šæœ¬è°ƒç”¨ç¤ºä¾‹

```bash
# è‡ªåŠ¨æå–
node scripts/auto-extract-guide-images.js race-tier-list

# æ›´æ–°æ•°æ®
node scripts/update-guide-images.js race-tier-list
```



